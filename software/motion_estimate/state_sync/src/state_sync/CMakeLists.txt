set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++0x -Wno-deprecated-declarations")

cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(state_sync)

# Check whether the atlas drivers are available, else skip build
find_package(PkgConfig)
pkg_check_modules(ATLAS atlas)

if (NOT ATLAS_FOUND)
  message(WARNING "atlas drivers not present, skipping state_sync.")
  return()
endif()

add_executable(drc-state-sync state_sync.cpp)
pods_use_pkg_config_packages(drc-state-sync eigen3
  model-client bot2-param-client bot2-frames
  kalman_filter_tools backlash_filter_tools torque_adjustment_tools
  lcmtypes_drc_lcmtypes)
pods_install_executables(drc-state-sync)

add_executable(drc-arm-sensor-dump arm_sensor_dump.cpp)
pods_use_pkg_config_packages(drc-arm-sensor-dump eigen3
  lcmtypes_drc_lcmtypes atlas)
pods_install_executables(drc-arm-sensor-dump)

add_executable(drc-update-offsets update_offsets.cpp)
pods_use_pkg_config_packages(drc-update-offsets eigen3
  lcmtypes_drc_lcmtypes atlas bot2-param-client bot2-frames)
pods_install_executables(drc-update-offsets)
